---
layout: post
title:  "自动出餐脚本"
date:   2025-08-10 10:00:00 +0800
categories: JS
tags: [浏览器插件, JS , 外卖]
---

自动出餐插件是一个强大的用户脚本，专为外卖商家设计，能够自动处理美团、饿了么和京东秒送平台上的外卖订单出餐操作。该脚本通过自动化操作，帮助商家在高峰期快速完成订单确认，提升运营效率。

## 软件截图
![软件截图](/assets/images/posts/2025-09-10-amd.png)


## 核心功能

以下流程图展示了自动出餐脚本的整体工作流程：

1. 多平台支持
- 美团外卖：自动识别备餐时间超过设定阈值的订单
- 饿了么：智能判断出餐倒计时小于设定值的订单
- 京东秒送：自动处理超时备餐订单

2. 智能时间判断
- 仅在工作时间段内执行（默认10:00-22:10）
- 根据各平台特性采用不同时间判断逻辑：
  - 美团/京东：当备餐时间超过设定值时自动出餐
  - 饿了么：当出餐倒计时小于设定值时自动出餐

3. 可视化配置界面
- 直观的配置弹窗
- 独立配置各平台的出餐时间阈值
- 一键重置功能

4. 智能状态监控
- 状态指示灯显示脚本运行状态（启用/禁用）
- 根据时间自动启用/禁用脚本功能

## 安装与使用

### 安装步骤
1. 安装Tampermonkey或Violentmonkey浏览器扩展
2. 访问脚本发布页面，点击"安装"按钮
3. 确认安装后访问美团、饿了么或京东秒送商家后台

### 使用方法
1. 点击右上角蓝色齿轮图标打开配置面板
2. 设置各平台的出餐时间阈值（默认6分钟）
3. 脚本会自动在指定时间段内工作
4. 状态指示灯显示运行状态（绿色-启用，红色-禁用）

### 配置选项详解

1. 出餐时间阈值
- **平台**：美团
  - **默认值**：6分钟
  - **说明**：备餐时间超过设定值即出餐
- **平台**：饿了么
  - **默认值**：6分钟
  - **说明**：倒计时小于设定值即出餐
- **平台**：京东秒送
  - **默认值**：6分钟
  - **说明**：备餐时间超过设定值即出餐

2. 工作时段控制
- **默认工作时间**：10:00:00 - 22:10:00
- 非工作时段脚本自动禁用

## 技术实现原理

### 1. 平台识别机制

<div class="mermaid">
graph TD
    A[访问商家后台] --> B{识别平台}
    B -->|美团| C[执行美团处理逻辑]
    B -->|饿了么| D[执行饿了么处理逻辑]
    B -->|京东| E[执行京东处理逻辑]
</div>

### 2. 自动化处理流程
1. 检查当前时间是否在允许执行区间
2. 识别当前所在平台
3. 点击"待出餐"标签页
4. 扫描订单列表
5. 根据时间规则判断是否自动出餐
6. 每60秒刷新页面重新检查新订单

### 3. 时间处理算法

{% highlight javascript %}
// 美团/京东时间处理
function isTimeGreaterThan(current, target) {
  // 格式: HH:MM:SS
  const toSeconds = timeStr => {
    const [h, m, s] = timeStr.split(':').map(Number);
    return h * 3600 + m * 60 + s;
  };
  return toSeconds(current) > toSeconds(target);
}

// 饿了么时间处理
function isTimeLessThan(current, target) {
  // 格式: X分Y秒
  const toSeconds = timeStr => {
    const match = timeStr.match(/(\d+)分(\d+)秒/);
    return match ? parseInt(match[1]) * 60 + parseInt(match[2]) : 0;
  };
  return toSeconds(current) < toSeconds(target);
}
{% endhighlight %}

## 使用注意事项

1. ​浏览器支持​​：推荐使用Chrome或新版Edge浏览器
2. ​页面刷新​​：脚本每60秒自动刷新页面获取新订单
3. ​权限要求​​：脚本需要访问商家后台页面数据的权限
4. ​时间校准​​：确保电脑时间准确，否则影响判断
5. ​订单安全​​：建议先在小范围测试后再全面启用

## 安全与隐私
- 本脚本仅在商家后台页面运行
- 不会收集或传输任何用户敏感信息
- 所有配置数据仅存储在浏览器本地