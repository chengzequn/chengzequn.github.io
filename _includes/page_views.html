<div class="page-views">
  <div class="page-views-content">
    <p>ğŸ”¥ çƒ­é—¨æ–‡ç« é˜…è¯»æ’è¡Œ</p>
    <div class="page-views-list">
      <!-- åªæ˜¾ç¤ºå‰5ç¯‡æ–‡ç«  -->
      {% assign counter = 0 %}
      {% for post in site.posts %}
        {% if counter < 5 %}
        <div class="page-view-item">
          <span class="page-view-count">{{ counter | plus: 1 }}.</span>
          <a href="{{ post.url }}" class="page-view-title" title="{{ post.title }}">{{ post.title | truncate: 20 }}</a>
          <span class="page-view-number">
            <i class="far fa-eye"></i> <span class="post-views" data-post-url="{{ post.url }}">-</span>
          </span>
        </div>
        {% assign counter = counter | plus: 1 %}
        {% endif %}
      {% endfor %}
    </div>
    <p class="page-views-date">ç»Ÿè®¡æ—¶é—´: {{ site.time | date: "%Yå¹´%mæœˆ%dæ—¥" }}</p>
  </div>
</div>

<script>
  // æœ¬åœ°é˜…è¯»æ¬¡æ•°ç»Ÿè®¡è„šæœ¬
  (function() {
    // é¡µé¢åŠ è½½åè·å–æ¯ç¯‡æ–‡ç« çš„é˜…è¯»æ¬¡æ•°
    window.addEventListener('load', function() {
      document.querySelectorAll('.post-views').forEach(function(element) {
        var postUrl = element.getAttribute('data-post-url');
        // è·å–URLçš„æœ€åä¸€éƒ¨åˆ†ä½œä¸ºæ–‡ç« æ ‡è¯†
        var postId = postUrl.split('/').filter(Boolean).join('-');
        // å°è¯•ä»localStorageè·å–é˜…è¯»æ¬¡æ•°
        var views = localStorage.getItem('post_views_' + postId);
        if (views) {
          element.textContent = views;
        } else {
          // å¦‚æœlocalStorageä¸­æ²¡æœ‰ï¼Œè®¾ç½®ä¸ºéšæœºæ•°ä½œä¸ºæ¨¡æ‹Ÿæ•°æ®
          var randomViews = Math.floor(Math.random() * 1000) + 10;
          localStorage.setItem('post_views_' + postId, randomViews);
          element.textContent = randomViews;
        }
      });
    });
  })();
</script>

<style>
  .page-views-content {
    padding: 10px;
    background-color: rgba(59, 130, 246, 0.05);
    border-radius: 0.5rem;
    border-left: 3px solid #3b82f6;
  }
  
  .page-views-content p {
    margin-bottom: 8px;
    line-height: 1.5;
  }
  
  .page-views-content p:last-child {
    margin-bottom: 0;
  }
  
  .page-views-list {
    margin: 10px 0;
  }
  
  .page-view-item {
    display: flex;
    align-items: center;
    padding: 5px 0;
    font-size: 0.875rem;
  }
  
  .page-view-count {
    width: 20px;
    text-align: right;
    margin-right: 8px;
    color: #3b82f6;
    font-weight: bold;
  }
  
  .page-view-title {
    flex: 1;
    margin-right: 8px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: inherit;
    text-decoration: none;
    transition: all 0.2s ease;
  }
  
  .page-view-title:hover {
    color: #3b82f6;
    background-color: rgba(59, 130, 246, 0.1);
    padding: 2px 4px;
    border-radius: 4px;
  }
  
  .page-view-number {
    color: #4a5568;
    font-size: 0.8125rem;
  }
  
  .page-views-date {
    font-size: 0.875rem;
    color: #4a5568;
    font-style: italic;
  }
</style>